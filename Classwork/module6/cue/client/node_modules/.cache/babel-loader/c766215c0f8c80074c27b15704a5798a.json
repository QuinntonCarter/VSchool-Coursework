{"ast":null,"code":"var _jsxFileName = \"/Users/quinntoncarter/Documents/VSchool/Classwork/module6/cue/client/src/components/context/spotifyProvider.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport { UserContext } from './userProvider.js'; // ** might be broken, vscode is acting weird: also check Auth.js for problems\n\nimport { accessToken, getCurrentUserProfile } from '../spotify.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const SpotifyContext = /*#__PURE__*/React.createContext();\nexport default function SpotifyProvider(props) {\n  _s();\n\n  const [spotifyToken, setSpotifyToken] = useState(null);\n  const [spotifyProfile, setSpotifyProfile] = useState(null); // ** refactor this to work from this page and save some info into local state for use like userProvider\n  // ** may need to edit spotify.js to save user info in localstorage.. or useEffect below to do it\n\n  const initState = {\n    user: JSON.parse(localStorage.getItem('spotifyUser')) || {},\n    token: localStorage.getItem('spotify_access_token') || '',\n    lists: [],\n    errMsg: ''\n  };\n  const [spotifyUserState, setSpotifyUserState] = useState(initState);\n  const {\n    logout\n  } = useContext(UserContext);\n  useEffect(() => {\n    if (accessToken) {\n      setSpotifyToken(accessToken);\n\n      const fetchData = async () => {\n        try {\n          const {\n            data\n          } = await getCurrentUserProfile();\n          setSpotifyProfile(data);\n        } catch (e) {\n          console.error(e);\n        }\n      };\n\n      fetchData();\n    } else if (!accessToken & spotifyToken) {\n      return;\n    } else if (!accessToken & !spotifyToken) {\n      logout();\n    }\n  }, [spotifyToken, setSpotifyProfile, logout]);\n  return /*#__PURE__*/_jsxDEV(SpotifyContext.Provider, {\n    value: {\n      spotifyProfile,\n      spotifyToken,\n      setSpotifyToken\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n\n_s(SpotifyProvider, \"HsonUZTa5Xrd+4RCtjwTVn97qVA=\");\n\n_c = SpotifyProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"SpotifyProvider\");","map":{"version":3,"sources":["/Users/quinntoncarter/Documents/VSchool/Classwork/module6/cue/client/src/components/context/spotifyProvider.js"],"names":["React","useEffect","useState","useContext","UserContext","accessToken","getCurrentUserProfile","SpotifyContext","createContext","SpotifyProvider","props","spotifyToken","setSpotifyToken","spotifyProfile","setSpotifyProfile","initState","user","JSON","parse","localStorage","getItem","token","lists","errMsg","spotifyUserState","setSpotifyUserState","logout","fetchData","data","e","console","error","children"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,SAASC,WAAT,QAA4B,mBAA5B,C,CACA;;AACA,SAASC,WAAT,EAAsBC,qBAAtB,QAAmD,eAAnD;;AAEA,OAAO,MAAMC,cAAc,gBAAGP,KAAK,CAACQ,aAAN,EAAvB;AAEP,eAAe,SAASC,eAAT,CAAyBC,KAAzB,EAA+B;AAAA;;AAC1C,QAAM,CAAEC,YAAF,EAAgBC,eAAhB,IAAoCV,QAAQ,CAAC,IAAD,CAAlD;AACA,QAAM,CAAEW,cAAF,EAAkBC,iBAAlB,IAAwCZ,QAAQ,CAAC,IAAD,CAAtD,CAF0C,CAI9C;AACA;;AACI,QAAMa,SAAS,GAAG;AACdC,IAAAA,IAAI,EAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAX,KAAmD,EAD3C;AAEdC,IAAAA,KAAK,EAAEF,YAAY,CAACC,OAAb,CAAqB,sBAArB,KAAgD,EAFzC;AAGdE,IAAAA,KAAK,EAAE,EAHO;AAIdC,IAAAA,MAAM,EAAE;AAJM,GAAlB;AAOA,QAAM,CAAEC,gBAAF,EAAoBC,mBAApB,IAA4CvB,QAAQ,CAACa,SAAD,CAA1D;AAEA,QAAM;AACFW,IAAAA;AADE,MAEFvB,UAAU,CAACC,WAAD,CAFd;AAKAH,EAAAA,SAAS,CAAC,MAAK;AACX,QAAGI,WAAH,EAAe;AACXO,MAAAA,eAAe,CAACP,WAAD,CAAf;;AAEA,YAAMsB,SAAS,GAAG,YAAY;AAC9B,YAAI;AACA,gBAAM;AAACC,YAAAA;AAAD,cAAS,MAAMtB,qBAAqB,EAA1C;AACAQ,UAAAA,iBAAiB,CAACc,IAAD,CAAjB;AACH,SAHD,CAGE,OAAMC,CAAN,EAAS;AACPC,UAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AAEH;AACA,OARD;;AASAF,MAAAA,SAAS;AACZ,KAbD,MAaO,IAAI,CAACtB,WAAD,GAAeM,YAAnB,EAAiC;AACpC;AACH,KAFM,MAEA,IAAI,CAACN,WAAD,GAAe,CAACM,YAApB,EAAiC;AACpCe,MAAAA,MAAM;AACT;AACJ,GAnBQ,EAmBN,CAACf,YAAD,EAAeG,iBAAf,EAAkCY,MAAlC,CAnBM,CAAT;AAqBA,sBACI,QAAC,cAAD,CAAgB,QAAhB;AACI,IAAA,KAAK,EAAE;AACHb,MAAAA,cADG;AAEHF,MAAAA,YAFG;AAGHC,MAAAA;AAHG,KADX;AAAA,cAMKF,KAAK,CAACsB;AANX;AAAA;AAAA;AAAA;AAAA,UADJ;AAUH;;GAnDuBvB,e;;KAAAA,e","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { UserContext } from './userProvider.js';\n// ** might be broken, vscode is acting weird: also check Auth.js for problems\nimport { accessToken, getCurrentUserProfile } from '../spotify.js';\n\nexport const SpotifyContext = React.createContext();\n\nexport default function SpotifyProvider(props){\n    const [ spotifyToken, setSpotifyToken ] = useState(null)\n    const [ spotifyProfile, setSpotifyProfile ] = useState(null);\n\n// ** refactor this to work from this page and save some info into local state for use like userProvider\n// ** may need to edit spotify.js to save user info in localstorage.. or useEffect below to do it\n    const initState = {\n        user: JSON.parse(localStorage.getItem('spotifyUser')) || {},\n        token: localStorage.getItem('spotify_access_token') || '',\n        lists: [],\n        errMsg: ''\n    };\n\n    const [ spotifyUserState, setSpotifyUserState ] = useState(initState)\n\n    const {\n        logout\n    } = useContext(UserContext)\n\n\n    useEffect(()=> {\n        if(accessToken){\n            setSpotifyToken(accessToken);\n    \n            const fetchData = async () => {\n            try {\n                const {data} = await getCurrentUserProfile();\n                setSpotifyProfile(data);\n            } catch(e) {\n                console.error(e);\n    \n            }\n            }\n            fetchData();\n        } else if (!accessToken & spotifyToken) {\n            return;\n        } else if (!accessToken & !spotifyToken){\n            logout();\n        }\n    }, [spotifyToken, setSpotifyProfile, logout])\n    \n    return(\n        <SpotifyContext.Provider\n            value={{\n                spotifyProfile,\n                spotifyToken,\n                setSpotifyToken\n            }}>\n            {props.children}\n        </SpotifyContext.Provider>\n    )\n}"]},"metadata":{},"sourceType":"module"}