{"ast":null,"code":"var _jsxFileName = \"/Users/quinntoncarter/Documents/VSchool/Classwork/module6/cue/client/src/components/checkMood.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { AppContext } from './context/appContext';\nimport { UserContext } from './context/userProvider';\nimport { MoodItem } from './moodItem.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const CheckMood = () => {\n  _s();\n\n  const {\n    shareItem,\n    getCurrentUserTop,\n    getPlaylists,\n    setPlaylists,\n    playlists,\n    found,\n    setFound\n  } = useContext(AppContext);\n  const {\n    spotifyUser: {\n      id\n    }\n  } = useContext(UserContext);\n  const history = useHistory();\n  const [view, setView] = useState(false);\n  const [type, setType] = useState('artists');\n  const [amount, setAmount] = useState(3);\n  const [timeframe, setTimeframe] = useState('short_term');\n  const [mood, setMood] = useState([]);\n  useEffect(() => {\n    getCurrentUserTop(type, amount, timeframe).then(res => {\n      const {\n        items\n      } = res;\n      setMood(items);\n    }).catch(err => console.log(err));\n    mood && mood.map(item => {\n      if (item.type === 'artist') {\n        setFound({\n          selectionName: item.name,\n          genres: item.genres.map(genre => genre),\n          image: item.images[0].url,\n          href: item.external_urls.spotify,\n          type: item.type\n        });\n      } else if (item.type === 'track') {\n        setFound(prevState => [...prevState, {\n          selectionName: item.album.name,\n          artists: item.artists.map(artist => artist.name),\n          image: item.album.images[0].url,\n          href: item.external_urls.spotify,\n          type: item.type\n        }]);\n      }\n    }, getPlaylists(id).then(res => {\n      setPlaylists({\n        items: res,\n        total: res.length\n      });\n    }).catch(err => console.log(err)));\n  }, [type, amount, timeframe]); // else if(item.type === 'playlist'){\n  //         setFound({\n  //             name: item.name,\n  //             description: item.description,\n  //             owner: item.owner.display_name,\n  //             ownerProfile: item.owner.external_urls.spotify,\n  //             image: item.images[0].url,\n  //             type: item.type,\n  //             href: item.external_urls.spotify\n  //         })\n  //     }\n  // },[])\n\n  const mappedMood = mood && mood.map(item => /*#__PURE__*/_jsxDEV(MoodItem, {\n    color: 'indigo',\n    item: item,\n    setFound: setFound\n  }, item.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 49\n  }, this));\n  const mappedPlaylists = playlists && playlists.items.map(item => /*#__PURE__*/_jsxDEV(MoodItem, {\n    color: 'indigo',\n    item: item\n  }, item.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 70\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid container-main\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-3 pt-4 bg-indigo-800 text-cyan-800 rounded\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        onClick: () => history.goBack(),\n        className: \"bg-cerise-700 text-xs text-cyan-50 font-bold btnbold-small\",\n        type: \"button\",\n        value: \"to profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onClick: () => setView(prevState => !prevState),\n        value: `view ${view ? `recent` : `playlists`}`,\n        title: \"click to check moods of spotify playlists\",\n        className: \"btn text-sm\",\n        type: \"button\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this), !view ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"p-3 text-md text-cocoa-900 grid grid-cols-1 gap-3 pr-6 pl-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"bg-indigo-200 text-center text-indigo-800 text-sm rounded-full\",\n            onChange: e => setAmount(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"3\",\n              children: \" top 3 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"5\",\n              children: \" top 5 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"8\",\n              children: \" top 8 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"10\",\n              children: \" top 10 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"15\",\n              children: \" top 15 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"20\",\n              children: \" top 20 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"25\",\n              children: \" top 25 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"30\",\n              children: \" top 30 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"40\",\n              children: \" top 40 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"50\",\n              children: \" top 50 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"bg-indigo-200 text-center text-sm text-indigo-800 rounded-full\",\n            onChange: e => setTimeframe(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"short_term\",\n              children: \" monthly \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"medium_term\",\n              children: \" biannual \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"long_term\",\n              children: \" annual \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"bg-indigo-200 text-center text-indigo-800 text-sm rounded-full\",\n            onChange: e => setType(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"artists\",\n              children: \" artists \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"tracks\",\n              children: \" tracks \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            onClick: () => shareItem(found),\n            className: \"bg-indigo-600 text-indigo-50 font-medium text-md btn\",\n            type: \"button\",\n            title: \"post as your mood\",\n            value: \"post mood.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-cerise-50\",\n          children: [\" top \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xl\",\n            children: amount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 60\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xl\",\n            children: [\" \", type, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 102\n          }, this), timeframe === 'short_term' && ` these past 30 days`, timeframe === 'medium_term' && ' these past 6 months', timeframe === 'long_term' && ' the past year']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" p-3 rounded\",\n          children: mappedMood || 'the vibe is off. refresh the page.'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true) :\n      /*#__PURE__*/\n      // playlist view\n      _jsxDEV(\"div\", {\n        className: \"p-3 text-md text-cocoa-50 grid grid-cols-1 gap-3 pr-6 pl-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm\",\n          children: [\" viewing \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xl\",\n            children: [\" \", playlists.total, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 49\n          }, this), \" playlists \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }, this), mappedPlaylists]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CheckMood, \"nbfYqXTH8Ew+SurgJqNySl3Mibw=\", false, function () {\n  return [useHistory];\n});\n\n_c = CheckMood;\n\nvar _c;\n\n$RefreshReg$(_c, \"CheckMood\");","map":{"version":3,"sources":["/Users/quinntoncarter/Documents/VSchool/Classwork/module6/cue/client/src/components/checkMood.js"],"names":["React","useState","useEffect","useContext","useHistory","AppContext","UserContext","MoodItem","CheckMood","shareItem","getCurrentUserTop","getPlaylists","setPlaylists","playlists","found","setFound","spotifyUser","id","history","view","setView","type","setType","amount","setAmount","timeframe","setTimeframe","mood","setMood","then","res","items","catch","err","console","log","map","item","selectionName","name","genres","genre","image","images","url","href","external_urls","spotify","prevState","album","artists","artist","total","length","mappedMood","mappedPlaylists","goBack","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { AppContext } from './context/appContext';\nimport { UserContext } from './context/userProvider';\nimport { MoodItem } from './moodItem.js';\n\nexport const CheckMood = () => {\n    const {\n        shareItem,\n        getCurrentUserTop,\n        getPlaylists,\n        setPlaylists,\n        playlists,\n        found,\n        setFound\n    } = useContext(AppContext);\n    const {\n        spotifyUser : {\n            id\n        }\n    } = useContext(UserContext);\n    \n    const history = useHistory()\n\n    const [ view, setView] = useState(false);\n    const [ type, setType ] = useState('artists');\n    const [ amount, setAmount ] = useState(3);\n    const [ timeframe, setTimeframe ] = useState('short_term');\n    const [ mood, setMood ] = useState([]);\n\n    useEffect(() => {\n        getCurrentUserTop(type, amount, timeframe)\n        .then(res => {\n            const { items } = res\n            setMood(items)})\n        .catch(err => console.log(err))\n        mood && mood.map(item => {\n            if(item.type === 'artist'){\n                setFound({\n                    selectionName: item.name,\n                    genres: item.genres.map(genre => genre),\n                    image: item.images[0].url,\n                    href: item.external_urls.spotify,\n                    type: item.type\n                })\n            } else if(item.type === 'track'){\n                setFound(prevState => [\n                    ...prevState, {\n                    selectionName: item.album.name,\n                    artists: item.artists.map(artist => artist.name),\n                    image: item.album.images[0].url,\n                    href: item.external_urls.spotify,\n                    type: item.type\n                }])\n            }\n        },\n        getPlaylists(id)\n        .then(res => {\n            setPlaylists({\n                items: res,\n                total: res.length\n            })\n        })\n        .catch(err => console.log(err))\n    )}, [type, amount, timeframe]);\n    // else if(item.type === 'playlist'){\n    //         setFound({\n    //             name: item.name,\n    //             description: item.description,\n    //             owner: item.owner.display_name,\n    //             ownerProfile: item.owner.external_urls.spotify,\n    //             image: item.images[0].url,\n    //             type: item.type,\n    //             href: item.external_urls.spotify\n    //         })\n    //     }\n    // },[])\n\n    const mappedMood = mood && mood.map(item => <MoodItem color={'indigo'} item={item} key={item.id} setFound={setFound}/>);\n    const mappedPlaylists = playlists && playlists.items.map(item => <MoodItem color={'indigo'} item={item} key={item.id}/>);\n\n    return(\n        <div className='grid container-main'>\n        <div className='p-3 pt-4 bg-indigo-800 text-cyan-800 rounded'>\n            <input onClick={() => history.goBack()} className='bg-cerise-700 text-xs text-cyan-50 font-bold btnbold-small' type='button' value='to profile'/>\n            <input onClick={() => setView(prevState => !prevState)} value={`view ${view ? `recent` : `playlists`}`} title='click to check moods of spotify playlists' className='btn text-sm' type='button'/>\n            { !view ?\n            <>\n                <form className='p-3 text-md text-cocoa-900 grid grid-cols-1 gap-3 pr-6 pl-6'>\n                    <select className='bg-indigo-200 text-center text-indigo-800 text-sm rounded-full' onChange={e => setAmount(e.target.value)}>\n                        <option value='3' > top 3 </option>\n                        <option value='5'> top 5 </option>\n                        <option value='8'> top 8 </option>\n                        <option value='10'> top 10 </option>\n                        <option value='15'> top 15 </option>\n                        <option value='20'> top 20 </option>\n                        <option value='25'> top 25 </option>\n                        <option value='30'> top 30 </option>\n                        <option value='40'> top 40 </option>\n                        <option value='50'> top 50 </option>\n                    </select>\n                    <select className='bg-indigo-200 text-center text-sm text-indigo-800 rounded-full' onChange={e => setTimeframe(e.target.value)}>\n                        <option value='short_term' > monthly </option>\n                        <option value='medium_term' > biannual </option>\n                        <option value='long_term'> annual </option>\n                    </select>\n                    <select className='bg-indigo-200 text-center text-indigo-800 text-sm rounded-full' onChange={e => setType(e.target.value)}>\n                        <option value='artists' > artists </option>\n                        <option value='tracks'> tracks </option>\n                    </select>\n                    <input onClick={() => shareItem(found)} className='bg-indigo-600 text-indigo-50 font-medium text-md btn' type='button' title='post as your mood' value='post mood.'/>\n                </form>\n                <p className='text-sm text-cerise-50'> top <span className='text-xl'>{amount}</span> <span className='text-xl'> {type} </span> \n                    {timeframe === 'short_term' && ` these past 30 days`} \n                    {timeframe === 'medium_term' && ' these past 6 months'}\n                    {timeframe === 'long_term' && ' the past year'} \n                </p>\n                <div className=' p-3 rounded'>\n                    {mappedMood || 'the vibe is off. refresh the page.'}\n                </div>\n            </>\n            :\n            // playlist view\n            <div className='p-3 text-md text-cocoa-50 grid grid-cols-1 gap-3 pr-6 pl-6'>\n                <p className='text-sm'> viewing <span className='text-xl'> {playlists.total} </span> playlists </p>\n                {mappedPlaylists}\n            </div>\n            }\n        </div>\n        </div>\n    )\n};"]},"metadata":{},"sourceType":"module"}